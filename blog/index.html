<!DOCTYPE html>
<html>
<head>
    <title></title>
    <link rel="stylesheet" type="text/css" href="http://static.tumblr.com/vr9xgox/PuGmmhqcs/normalize.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
</head>
<body>

      <div id="top-container">

          <div id="header">

              <a href="/" class="menu left">

                  <ul>
                      <li class="icon umg"></li>
                      <li class="logo"></li>
                      <li class="tag">nerd.talk</li>
                  </ul>

              </a>

              <div class="menu right clear">

                  <ul>
                      <li><a class="icon icon-social-state icon-facebook" href="http://www.facebook.com/ullisenmedia" target="_blank"></a></li>
                      <li><a class="icon icon-social-state icon-twitter" href="http://twitter.com/ullisenmedia" target="_blank"></a></li>
                      <li><a class="icon icon-social-state icon-gplus" href="http://plus.google.com/+ullisenmedia" target="_blank"></a></li>
                      <li><a class="icon icon-www" href="http://ullisenmedia.com" target="_blank"></a></li>
                      <li><a id="searchButton" class="icon search" href="#"></a></li>
                  </ul>

              </div>

          </div>

          <form id="search" action="/search" method="get">
              <input type="text" name="q" id="q" placeholder="Search" autocomplete="false" autocorrect="false">
          </form>

      </div>

      <div id="expander"></div>

      <div id="content-container">

          <div id="content">

              <div id="main-content" class="column">

                  <div class="post post-text">
                      <div class="header">
                          <div class="title clear">
                              <h1><a href="#" class="link">Google Dart And Some Other Shit</a></h1>
                              <div class="icon-content-type comments"><span class="count"><a href="#" class="link">100</a></span></div>
                          </div>

                          <a href="#" class="line-through"></a>

                      </div>

                      <div class="sub-header clear">

                          <div class="pull-left">
                              <h2>
                                  <span>By:&nbsp;<a href="http://blog.ullisenmedia.com/" target="_blank">ullisenmedia</a>&nbsp;&nbsp;&#149;&nbsp;&nbsp;Jun 15, 2014</span>
                              </h2>
                          </div>

                          <div class="menu social pull-right">
                              <ul>
                                  <li><a class="icon icon-facebook-nobg fb-share" href="#"></a></li>
                                  <li><a class="icon icon-twitter-nobg twitter-share" href="#"></a></li>
                                  <li><a class="icon icon-gplus-nobg gplus-share" href="#"></a></li>
                              </ul>
                          </div>

                      </div>


                      <div class="line dotted"></div>

                      <a href="#"><img src="http://www.w8themes.com/wp-content/uploads/2013/11/Free-Wallpaper-For-Android.png"/></a>
                      <p>
                          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus molestie id <a href="#">neque</a> at tempor. Nam cursus dignissim orci. Aliquam accumsan lectus eget risus dapibus vehicula. Nulla scelerisque varius diam, eget iaculis dolor hendrerit ut. Cras interdum ipsum mi, pellentesque tristique dui iaculis id. Nullam at lobortis tellus. Aenean venenatis suscipit hendrerit. Aliquam sollicitudin felis sit amet lorem varius, vitae aliquet sem interdum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                      </p>

                      <div class="footer clear">

                          <div class="read-more"><span>Read: <a href="#">More Google Dart And Some Other Shit</a></span></div>
                          <div class="menu social clear">
                              <ul>
                                  <li><a class="icon icon-facebook-nobg fb-share" href="#"></a></li>
                                  <li><a class="icon icon-twitter-nobg twitter-share" href="#"></a></li>
                                  <li><a class="icon icon-gplus-nobg gplus-share" href="#"></a></li>
                              </ul>
                          </div>

                      </div>
                  </div>

                    <div id="paging-content">

                        <a href="#" class="page-btn prev"><span>OLD POSTS</span></a>
                        <a href="#" class="page-btn next"><span>NEWER POSTS</span></a>

                    </div>
              </div>



              <div id="side-content" class="column">

                  <div class="about">
                      <h3>What is <span class="label">nerd.talk</span> ?</h3>
                      <p>
                          Aenean venenatis suscipit hendrerit. Aliquam sollicitudin felis sit amet lorem varius, vitae aliquet sem interdum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                      </p>
                  </div>

                  <div class="recent-posts">
                      <h3>Recent Posts</h3>
                  </div>

                  <div class="links">
                      <h3>Links</h3>
                      <ul>
                          <li><a href="/archive">Archive</a></li>
                          <li><a href="/rss">Rss</a></li>
                      </ul>
                  </div>

              </div>
          </div>

      </div>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
      <script>

          $('document').ready(function() {

              var searchForm;
              var searchButton;
              var searchField;

              var SEARCH_EXPAND_INCR = 34;
              var SEARCH_FIELD_MIN_WIDTH = 250;

              var SEARCH_BAR_MIN_HEIGHT = 0;
              var SEARCH_BAR_MAX_HEIGHT = 120;

              var EXPANDER_MIN_HEIGHT = 120;
              var EXPANDER_MAX_HEIGHT = 180;

              var SHARE_TYPE_FB = 'fb';
              var SHARE_TYPE_TWITTER = 'twitter';
              var SHARE_TYPE_GPLUS = 'gplus';

              var SHARE_WINDOW_WIDTH = 'width=550,height=266';

              var init = function() {

                  searchForm = $('#search');
                  searchButton = $('#searchButton');
                  searchField = $('#q');

                  addListeners();
                  getRecentPosts();
              };

              var share = function(type) {

                  var url;

                  switch(type) {
                      // http://www.facebook.com/sharer.php?u={Permalink}
                      case SHARE_TYPE_FB:
                          url = 'http://www.facebook.com/sharer.php?u={Permalink}';
                          break;
                      case SHARE_TYPE_TWITTER:
                          url = 'https://twitter.com/share??original_referer={Permalind}&source=tweetbutton&text={Title}&url={Permalink}&via=ullisenmedian';
                          break;
                      case SHARE_TYPE_GPLUS:
                          url = 'https://plus.google.com/share?url={Permalink}';
                          break;
                  }

                  window.open(url,'', SHARE_WINDOW_WIDTH);

                  return false;
              };

              var getRecentPosts = function() {

                  var url = 'http://nerdtalk.ullisenmedia.com/api/read/json?callback=?&filter=text&num=5';

//                var data = JSON.parse(recentPost);
//                buildRecentPosts(data.posts);

                  $.getJSON(url, function(data) {

                      if(data && data.hasOwnProperty('posts')) {

                          buildRecentPosts(data.posts);
                      }

                  });
              };

              var buildRecentPosts = function(posts) {

                  var elements = [];

                  $.each(posts, function(key, val) {

                      console.log(val['regular-title']);
                      elements.push('<li><a href="'+ val.url +'">'+ val['regular-title'] +'</a></li>');
                  });

                  $( "<ul/>", {
                      "class": "recent-post-list",
                      html: elements.join('')
                  }).appendTo( ".recent-posts" );
              };

              var onSearchInputChange = function() {

                  var text = searchField.val();

                  var width = text.length * SEARCH_EXPAND_INCR;

                  if(width > SEARCH_FIELD_MIN_WIDTH) {

                      searchField.width(width);
                  }

              };

              var onSearchButtonClicked = function() {

                  var isActive = searchForm.height() > 0;

                  if(isActive) {

                      searchForm.height(SEARCH_BAR_MIN_HEIGHT);
                      $('#expander').height(EXPANDER_MIN_HEIGHT);

                  } else {

                      searchForm.height(SEARCH_BAR_MAX_HEIGHT);
                      $('#expander').height(EXPANDER_MAX_HEIGHT);
                  }

              };

              var addListeners = function() {

                  searchButton.click($.proxy(onSearchButtonClicked, this));
                  searchForm.focusout($.proxy(onSearchButtonClicked, this))
                  searchField.keypress($.proxy(onSearchInputChange, this));

                  $('.fb-share').click(function() {

                      share(SHARE_TYPE_FB);
                  });

                  $('.twitter-share').click(function() {

                      share(SHARE_TYPE_TWITTER);
                  });

                  $('.gplus-share').click(function() {

                      share(SHARE_TYPE_GPLUS);
                  });
              };

              init();
          });

      </script>

</body>
</html>